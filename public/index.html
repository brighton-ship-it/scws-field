<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover, user-scalable=no">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="format-detection" content="telephone=no">
    <title>SCWS Field</title>
    <link rel="apple-touch-icon" href="icon-192.png">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <nav class="sidebar">
        <div class="logo">
            <span class="logo-icon">üíß</span>
            <span class="logo-text">SCWS</span>
        </div>
        <ul class="nav-links">
            <li><a href="#" data-page="dashboard" class="active"><span class="nav-icon">üìä</span><span class="nav-label">Dashboard</span></a></li>
            <li><a href="#" data-page="schedule"><span class="nav-icon">üìÖ</span><span class="nav-label">Schedule</span></a></li>
            <li><a href="#" data-page="jobs"><span class="nav-icon">üìã</span><span class="nav-label">Jobs</span></a></li>
            <li><a href="#" data-page="customers"><span class="nav-icon">üë•</span><span class="nav-label">Customers</span></a></li>
            <li><a href="#" data-page="quotes"><span class="nav-icon">üìù</span><span class="nav-label">Quotes</span></a></li>
            <li><a href="#" data-page="invoices"><span class="nav-icon">üí∞</span><span class="nav-label">Invoices</span></a></li>
            <li><a href="#" data-page="requests"><span class="nav-icon">üì•</span><span class="nav-label">Requests</span><span class="badge" id="requests-badge"></span></a></li>
            <li><a href="#" data-page="team"><span class="nav-icon">üë∑</span><span class="nav-label">Team</span></a></li>
            <li><a href="#" data-page="products"><span class="nav-icon">üîß</span><span class="nav-label">Price List</span></a></li>
            <li><a href="#" data-page="reports"><span class="nav-icon">üìà</span><span class="nav-label">Reports</span></a></li>
        </ul>
        <div class="nav-footer">
            <a href="#" data-page="settings"><span class="nav-icon">‚öôÔ∏è</span><span class="nav-label">Settings</span></a>
        </div>
    </nav>

    <main class="content">
        <!-- Dashboard -->
        <div id="page-dashboard" class="page active">
            <header class="page-header">
                <h1>Dashboard</h1>
                <span class="date" id="current-date"></span>
            </header>
            
            <div class="stats-grid" id="stats-grid">
                <div class="stat-card">
                    <div class="stat-icon">üìã</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-jobs-today">0</div>
                        <div class="stat-label">Jobs Today</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üîÑ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-in-progress">0</div>
                        <div class="stat-label">In Progress</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üìù</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-pending-quotes">0</div>
                        <div class="stat-label">Pending Quotes</div>
                    </div>
                </div>
                <div class="stat-card">
                    <div class="stat-icon">üì•</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-new-requests">0</div>
                        <div class="stat-label">New Requests</div>
                    </div>
                </div>
                <div class="stat-card highlight">
                    <div class="stat-icon">üíµ</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-revenue">$0</div>
                        <div class="stat-label">Revenue (MTD)</div>
                    </div>
                </div>
                <div class="stat-card warning">
                    <div class="stat-icon">‚ö†Ô∏è</div>
                    <div class="stat-content">
                        <div class="stat-value" id="stat-outstanding">$0</div>
                        <div class="stat-label">Outstanding</div>
                    </div>
                </div>
            </div>

            <div class="dashboard-grid">
                <section class="dashboard-card">
                    <div class="card-header">
                        <h2>Today's Schedule</h2>
                        <button class="btn btn-small btn-primary" onclick="openJobModal()">+ New Job</button>
                    </div>
                    <div id="todays-jobs-list" class="jobs-list"></div>
                </section>
                
                <section class="dashboard-card">
                    <div class="card-header">
                        <h2>New Requests</h2>
                        <a href="#" data-page="requests" class="link">View All ‚Üí</a>
                    </div>
                    <div id="new-requests-list" class="requests-list"></div>
                </section>
            </div>
        </div>

        <!-- Schedule/Calendar -->
        <div id="page-schedule" class="page">
            <header class="page-header">
                <h1>Schedule</h1>
                <div class="header-actions">
                    <button class="btn" onclick="changeWeek(-1)">‚Üê Prev</button>
                    <span id="week-label" style="margin: 0 15px; font-weight: 600;"></span>
                    <button class="btn" onclick="changeWeek(1)">Next ‚Üí</button>
                    <button class="btn btn-primary" onclick="openJobModal()" style="margin-left: 20px;">+ New Job</button>
                </div>
            </header>
            <div id="schedule-view" class="schedule-view"></div>
        </div>

        <!-- Jobs -->
        <div id="page-jobs" class="page">
            <header class="page-header">
                <h1>Jobs</h1>
                <button class="btn btn-primary" onclick="openJobModal()">+ New Job</button>
            </header>
            <div class="filters">
                <select id="job-status-filter" onchange="loadJobs()">
                    <option value="">All Status</option>
                    <option value="scheduled">Scheduled</option>
                    <option value="in_progress">In Progress</option>
                    <option value="completed">Completed</option>
                    <option value="cancelled">Cancelled</option>
                </select>
                <select id="job-assigned-filter" onchange="loadJobs()">
                    <option value="">All Team</option>
                </select>
                <input type="date" id="job-date-filter" onchange="loadJobs()">
                <button class="btn" onclick="clearJobFilters()">Clear</button>
            </div>
            <div id="jobs-list" class="jobs-list"></div>
        </div>

        <!-- Customers -->
        <div id="page-customers" class="page">
            <header class="page-header">
                <h1>Customers</h1>
                <button class="btn btn-primary" onclick="openCustomerModal()">+ New Customer</button>
            </header>
            <div class="search-bar">
                <input type="text" id="customer-search" placeholder="Search customers..." oninput="searchCustomers()">
            </div>
            <div id="customers-list" class="customers-list"></div>
        </div>

        <!-- Quotes -->
        <div id="page-quotes" class="page">
            <header class="page-header">
                <h1>Quotes</h1>
                <button class="btn btn-primary" onclick="openQuoteModal()">+ New Quote</button>
            </header>
            <div class="filters">
                <select id="quote-status-filter" onchange="loadQuotes()">
                    <option value="">All Status</option>
                    <option value="draft">Draft</option>
                    <option value="sent">Sent</option>
                    <option value="accepted">Accepted</option>
                    <option value="declined">Declined</option>
                </select>
            </div>
            <div id="quotes-list" class="quotes-list"></div>
        </div>

        <!-- Invoices -->
        <div id="page-invoices" class="page">
            <header class="page-header">
                <h1>Invoices</h1>
                <button class="btn btn-primary" onclick="openInvoiceModal()">+ New Invoice</button>
            </header>
            <div class="filters">
                <select id="invoice-status-filter" onchange="loadInvoices()">
                    <option value="">All Status</option>
                    <option value="draft">Draft</option>
                    <option value="sent">Sent</option>
                    <option value="partial">Partial</option>
                    <option value="paid">Paid</option>
                </select>
            </div>
            <div id="invoices-list" class="invoices-list"></div>
        </div>

        <!-- Requests (Online Booking) -->
        <div id="page-requests" class="page">
            <header class="page-header">
                <h1>Service Requests</h1>
            </header>
            <div class="filters">
                <select id="request-status-filter" onchange="loadRequests()">
                    <option value="">All Status</option>
                    <option value="new">New</option>
                    <option value="contacted">Contacted</option>
                    <option value="scheduled">Scheduled</option>
                    <option value="declined">Declined</option>
                </select>
            </div>
            <div id="requests-list-page" class="requests-list"></div>
        </div>

        <!-- Team -->
        <div id="page-team" class="page">
            <header class="page-header">
                <h1>Team</h1>
                <button class="btn btn-primary" onclick="openTeamModal()">+ Add Team Member</button>
            </header>
            <div id="team-list" class="team-list"></div>
        </div>

        <!-- Products/Services -->
        <div id="page-products" class="page">
            <header class="page-header">
                <h1>Price List</h1>
                <button class="btn btn-primary" onclick="openProductModal()">+ Add Item</button>
            </header>
            <div id="products-list" class="products-list"></div>
        </div>

        <!-- Reports -->
        <div id="page-reports" class="page">
            <header class="page-header">
                <h1>Reports</h1>
            </header>
            <div class="reports-grid">
                <div class="report-card" onclick="showReport('revenue')">
                    <h3>üí∞ Revenue Report</h3>
                    <p>Track income by day, week, or month</p>
                </div>
                <div class="report-card" onclick="showReport('jobs')">
                    <h3>üìã Jobs Report</h3>
                    <p>Job counts by status, type, and technician</p>
                </div>
                <div class="report-card" onclick="showReport('customers')">
                    <h3>üë• Customer Report</h3>
                    <p>Top customers and acquisition</p>
                </div>
                <div class="report-card" onclick="showReport('time')">
                    <h3>‚è±Ô∏è Time Report</h3>
                    <p>Hours logged by team member</p>
                </div>
            </div>
            <div id="report-content" class="report-content"></div>
        </div>

        <!-- Settings -->
        <div id="page-settings" class="page">
            <header class="page-header">
                <h1>Settings</h1>
            </header>
            <div class="settings-tabs">
                <button class="tab active" data-tab="company">Company</button>
                <button class="tab" data-tab="booking">Online Booking</button>
                <button class="tab" data-tab="invoicing">Invoicing</button>
                <button class="tab" data-tab="notifications">Notifications</button>
            </div>
            <form id="settings-form" class="settings-form" onsubmit="saveSettings(event)">
                <div id="settings-company" class="settings-section active">
                    <div class="form-group">
                        <label>Company Name</label>
                        <input type="text" name="company_name">
                    </div>
                    <div class="form-group">
                        <label>Phone</label>
                        <input type="text" name="company_phone">
                    </div>
                    <div class="form-group">
                        <label>Email</label>
                        <input type="email" name="company_email">
                    </div>
                    <div class="form-group">
                        <label>Address</label>
                        <input type="text" name="company_address">
                    </div>
                </div>
                <div id="settings-booking" class="settings-section">
                    <div class="form-group">
                        <label><input type="checkbox" name="booking_enabled"> Enable Online Booking</label>
                    </div>
                    <div class="form-group">
                        <label>Business Hours Start</label>
                        <input type="time" name="business_hours_start">
                    </div>
                    <div class="form-group">
                        <label>Business Hours End</label>
                        <input type="time" name="business_hours_end">
                    </div>
                </div>
                <div id="settings-invoicing" class="settings-section">
                    <div class="form-group">
                        <label>Tax Rate (%)</label>
                        <input type="number" step="0.01" name="tax_rate">
                    </div>
                    <div class="form-group">
                        <label>Invoice Prefix</label>
                        <input type="text" name="invoice_prefix">
                    </div>
                    <div class="form-group">
                        <label>Quote Prefix</label>
                        <input type="text" name="quote_prefix">
                    </div>
                </div>
                <div id="settings-notifications" class="settings-section">
                    <p style="color: var(--gray-500);">Notification settings coming soon...</p>
                </div>
                <button type="submit" class="btn btn-primary">Save Settings</button>
            </form>
        </div>
    </main>

    <!-- Modals will be in separate file for clarity -->
    <div id="modals-container"></div>

    <script src="app.js"></script>
    <script src="modals.js"></script>
</body>
</html>
